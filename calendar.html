<!doctype html>
<html lang="sv">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Calendar</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/site.f3c51a6396.css">
  </head>
  <body>
    <div id="include-header"></div>

    <main class="container py-4">
     
      <h1 data-i18n="calendar.title">Parish Calendar</h1>

      <p data-i18n="calendar.intro">Upcoming liturgies and events.</p>

      <!-- CALENDAR (three fixed iframes; we show/hide by language) -->
      <div class="mb-3">
        <!-- Swedish (default visible) -->
        <iframe
          class="gcal-frame"
          data-lang="sv"
          src="https://calendar.google.com/calendar/embed?src=879f7dc660496c5013f132b95eb0f0b9e71471304b4c879338072473ceddbbc4%40group.calendar.google.com&ctz=Europe%2FStockholm&hl=sv"
          style="width:100%; height:70vh; min-height:600px; border:0; display:block;"
          frameborder="0" scrolling="no" loading="lazy"></iframe>

        <!-- English -->
        <iframe
          class="gcal-frame"
          data-lang="en"
          src="https://calendar.google.com/calendar/embed?src=879f7dc660496c5013f132b95eb0f0b9e71471304b4c879338072473ceddbbc4%40group.calendar.google.com&ctz=Europe%2FStockholm&hl=en"
          style="width:100%; height:70vh; min-height:600px; border:0; display:none;"
          frameborder="0" scrolling="no" loading="lazy"></iframe>

        <!-- Serbian -->
        <iframe
          class="gcal-frame"
          data-lang="sr"
          src="https://calendar.google.com/calendar/embed?src=879f7dc660496c5013f132b95eb0f0b9e71471304b4c879338072473ceddbbc4%40group.calendar.google.com&ctz=Europe%2FStockholm&hl=sr"
          style="width:100%; height:70vh; min-height:600px; border:0; display:none;"
          frameborder="0" scrolling="no" loading="lazy"></iframe>
      </div>

      <!-- SUBSCRIBE (only iCal, Google button is already in the embed) -->
      <div class="d-flex flex-wrap gap-2 my-3">
        <a
          class="btn btn-outline-secondary"
          href="https://calendar.google.com/calendar/ical/879f7dc660496c5013f132b95eb0f0b9e71471304b4c879338072473ceddbbc4%40group.calendar.google.com/public/basic.ics"
          data-i18n="calendar.subscribe.ics"
        >
          Subscribe via iCal (.ics)
        </a>
      </div>

      <p class="small text-muted" data-i18n="calendar.subscribe.help">
        Apple Calendar: copy the iCal link. On iPhone/iPad go to Settings → Calendar → Accounts → Add Subscribed Calendar.
      </p>
    </main>

    <div id="include-footer"></div>

    <!-- Keep this order -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/js/i18n.js"></script>
    <script src="/assets/js/include.js"></script>

    <!-- One small script to swap iframes when language changes -->
    <script>
    (function () {
      function getLang() {
        // i18n sets <html lang>; that's our source of truth
        return document.documentElement.lang || localStorage.getItem('lang') || 'sv';
      }
      function showCalendar(lang) {
        document.querySelectorAll('.gcal-frame').forEach(function (f) {
          f.style.display = (f.getAttribute('data-lang') === lang) ? 'block' : 'none';
        });
      }
      // Initial
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function () { showCalendar(getLang()); });
      } else {
        showCalendar(getLang());
      }
      // React when <html lang> changes
      var mo = new MutationObserver(function () { showCalendar(getLang()); });
      mo.observe(document.documentElement, { attributes: true, attributeFilter: ['lang'] });
    })();
    </script>
  </body>
</html>
